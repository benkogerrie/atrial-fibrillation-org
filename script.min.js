document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".nav-toggle"),t=document.querySelector(".nav-menu"),n=document.querySelectorAll(".nav-link");e.addEventListener("click",function(){t.classList.toggle("active"),e.classList.toggle("active")}),n.forEach(function(n){n.addEventListener("click",function(){t.classList.remove("active"),e.classList.remove("active")})}),document.querySelectorAll('.star-rating').forEach(rating=>{const stars=rating.querySelectorAll('input[type="radio"]');const labels=rating.querySelectorAll('label');stars.forEach((star,index)=>{star.addEventListener('change',function(){labels.forEach(label=>label.classList.remove('active'));for(let i=0;i<=index;i++){labels[i].classList.add('active')}})})});document.addEventListener("click",function(n){e.contains(n.target)||t.contains(n.target)||(t.classList.remove("active"),e.classList.remove("active"))})});document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));if(t){const e=t.offsetTop-70;window.scrollTo({top:e,behavior:"smooth"})}})});window.addEventListener("scroll",function(){const e=document.querySelectorAll("section[id]"),t=document.querySelectorAll(".nav-link");let n="";e.forEach(e=>{const t=e.offsetTop-100,o=e.offsetHeight;window.pageYOffset>=t&&window.pageYOffset<t+o&&(n=e.getAttribute("id"))}),t.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===`#${n}`&&e.classList.add("active")})});function isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function showNotification(e,t="info"){const n=document.querySelector(".notification");n&&n.remove();const o=document.createElement("div");o.className=`notification notification-${t}`,o.innerHTML=`\n        <div class="notification-content">\n            <span class="notification-message">${e}</span>\n            <button class="notification-close">&times;</button>\n        </div>\n    `,o.style.cssText=`position:fixed;top:90px;right:20px;background:${"success"===t?"#10b981":"error"===t?"#ef4444":"#3b82f6"};color:white;padding:1rem 1.5rem;border-radius:.5rem;box-shadow:0 10px 15px -3px rgba(0,0,0,.1);z-index:10000;max-width:400px;animation:slideInRight .3s ease-out;`,document.body.appendChild(o);const s=o.querySelector(".notification-close");s.addEventListener("click",()=>{o.remove()}),setTimeout(()=>{o.parentNode&&(o.style.animation="slideOutRight .3s ease-in",setTimeout(()=>o.remove(),300))},5e3)}const style=document.createElement("style");style.textContent="@keyframes slideInRight{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}@keyframes slideOutRight{from{transform:translateX(0);opacity:1}to{transform:translateX(100%);opacity:0}}.notification-content{display:flex;align-items:center;justify-content:space-between;gap:1rem}.notification-close{background:none;border:none;color:white;font-size:1.5rem;cursor:pointer;padding:0;line-height:1}.notification-close:hover{opacity:.8}",document.head.appendChild(style),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".contact-form");if(e){e.addEventListener("submit",function(t){t.preventDefault();const n=new FormData(this),o=n.get("name"),s=n.get("email"),i=n.get("subject"),a=n.get("message");if(!s||!a)return void showNotification("Please fill in all required fields.","error");if(!isValidEmail(s))return void showNotification("Please enter a valid email address.","error");const r=this.querySelector('button[type="submit"]'),l=r.textContent;r.textContent="Sending...",r.disabled=!0,setTimeout(()=>{showNotification("Thank you! Your message has been sent. We will get back to you as soon as possible.","success"),this.reset(),r.textContent=l,r.disabled=!1},2e3)})}}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".about-card, .trigger-card, .supplement-card");e.forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity .6s ease-out, transform .6s ease-out";new IntersectionObserver((t=>{t.forEach(t=>{t.isIntersecting&&(e.style.opacity="1",e.style.transform="translateY(0)")})}),{threshold:.1,rootMargin:"0px 0px -50px 0px"}).observe(e)})}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".supplement-card").forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-8px) scale(1.02)"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0) scale(1)"})})});function lazyLoadImages(){const e=document.querySelectorAll("img[data-src]"),t=new IntersectionObserver(((n,o)=>{n.forEach(n=>{if(n.isIntersecting){const e=n.target;e.src=e.dataset.src,e.classList.remove("lazy"),t.unobserve(e)}})}));e.forEach(e=>t.observe(e))}document.addEventListener("DOMContentLoaded",lazyLoadImages);function trackEvent(e,t={}){console.log("Event tracked:",e,t)}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",function(){trackEvent("form_submit",{form_type:this.className,page:window.location.pathname})})})}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".nav-link").forEach(e=>{e.addEventListener("click",function(){trackEvent("navigation_click",{link_text:this.textContent,link_href:this.getAttribute("href")})})})}),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("research-grid");if(!e)return;function t(t){t.forEach(t=>{const n=document.createElement("article");n.className="research-card";const o=`<div class="research-meta"><span class="badge">${t.topic}</span><span class="badge">${t.type}</span>${t.population&&"—"!==t.population?`<span class="badge">${t.population}</span>`:""}<span class="badge">Evidence: ${t.evidence}</span></div>`;n.innerHTML=`${o}<h3 class="research-title">${t.title}</h3><p class="research-journal">${t.journal}</p><p class="research-summary">${t.summary}</p><div class="research-actions"><a class="research-link" href="${t.url}" target="_blank" rel="noopener noreferrer">Read study</a></div>`,e.appendChild(n)})}function n(){const n=new URL("research.json",window.location.href).toString();fetch(n,{cache:"no-store"}).then(e=>{if(!e.ok)throw new Error("Failed to fetch research.json");return e.json()}).then(t).catch(()=>{fetch("./research.json?cb="+Date.now()).then(e=>e.ok?e.json():Promise.reject()).then(t).catch(()=>{t([{topic:"Taurine",title:"Taurine and cardiac rhythm stability (overview)",journal:"Summary card",url:"https://pubmed.ncbi.nlm.nih.gov/28849502/",summary:"Preclinical and case evidence suggests taurine may stabilize cardiac rhythm and reduce remodeling; human AF trials are needed.",type:"Summary",population:"—",evidence:"emerging"},{topic:"Citrulline/NO",title:"NO pathway and AF (overview)",journal:"Summary card",url:"https://pubmed.ncbi.nlm.nih.gov/15172469/",summary:"NO donors reduced post‑op AF in trials; citrulline improves NO bioavailability but AF outcome data remain limited.",type:"Summary",population:"—",evidence:"moderate"}])})})}n()});